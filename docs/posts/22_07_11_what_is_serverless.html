<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/longblog/static/img/favicon.png"><link rel="icon" href="/longblog/static/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content=""><meta name="author" content="longalong"><meta name="keywords" content=""><title>serverless_究竟是何方神圣？ - Longbao</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/longblog/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/longblog/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"iamlongalong.github.io",root:"/longblog/",version:"1.8.11",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/static/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}},search_path:"/local-search.xml"}</script><script src="/longblog/js/utils.js"></script><script src="/longblog/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><header style="height:35vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/longblog/">&nbsp;<strong>Longbao</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/longblog/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/longblog/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/longblog/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/longblog/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/longblog/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(/longblog/static/img/default.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="serverless_究竟是何方神圣？"></span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> longalong </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-07-11 21:24" pubdate>2022年7月11日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.5k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 15 分钟</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">serverless_究竟是何方神圣？</h1><div class="markdown-body"><h2 id="什么是-serverless"><a href="#什么是-serverless" class="headerlink" title="什么是 serverless"></a>什么是 serverless</h2><p>顾名思义，<code>serverless</code> 就是 <code>server-less</code>，也就是 <code>别话时间去搞服务器</code> =&gt; <code>把精力全都放到业务开发上</code> !</p><p>在传统的开发流程中，一个团队的标准配置是： 前端工程师 * x + 后端工程师 * y + 运维工程师 * z 。 前端写交互，后端写数据逻辑与存储，运维就搞服务部署、灰度、日志、监控等等。每个岗位各司其职，看起来十分完美。</p><p>但有时候也没有那么完美，人越多、职责分的越细，岗位间的鸿沟就越大，沟通的成本在组织内就会急剧增加。 通常的表现就是 会越来越多、参会的人也越拉越多，有时候可能一个简单的 <code>上新服务进行调试</code> 的工作，都需要大动干戈搞十来个人拉会各种同步和对齐。</p><p>这种时候我们可能就会想： 能不能不要这么多麻烦的服务器的问题？由一个统一的平台去解决 网关配置、服务发现、服务调用、日志、告警、数据库、中间件、CICD、负载均衡、动态扩缩容 等等……</p><p>实际上，不论是传统的各种 cmdb，还是各种微服务框架，还是各种服务引擎，都是在为了解决上面列出的这个问题，只是他们选择的方案不同而已。 其中 serverless，是最晚出现的一种方案，是在 微服务架构之后出现的另一种架构风格。</p><p>有一种论调是 serverless = faas + baas。其中 faas 是主计算的，而 baas 是主存储的。实际上我们对服务器的需求本质上就这两类： 计算 + 存储。</p><p>而泛 IT 领域内，大家常说起 serverless 的时候，总喜欢把 AWS 的 lambda 计算作为例子，或者把 阿里云 的 函数计算 作为例子。容易让人误以为 serverless 就是 <code>函数计算</code> 。</p><p>而我认为 serverless ，除了包括 机器视角下 的 faas 以及 baas 外，还包括 开发流 视角下的 serverless 开发工具链 + 管理平台 + 编排系统 + 监控系统。 这是站在 serverless 的终极目标上得出的结论。</p><p>云服务上更关心 机器视角，例如 baas 要包含哪些产品？kv？文档存储？对象存储？table存储？ 例如 faas 有哪些形式的延伸？微服务场景？任务触发场景？</p><p>开发者更关心 开发流视角，例如 如何部署一段程序？如何管理一段程序？如何监控程序运行？</p><h2 id="serverless-解决了什么问题？"><a href="#serverless-解决了什么问题？" class="headerlink" title="serverless 解决了什么问题？"></a>serverless 解决了什么问题？</h2><ol><li>开发和部署工具链</li><li>弹性扩缩容 (按量付费)</li></ol><h2 id="使用-serverless-的场景是什么？"><a href="#使用-serverless-的场景是什么？" class="headerlink" title="使用 serverless 的场景是什么？"></a>使用 serverless 的场景是什么？</h2><ol><li>异步 (事件触发)</li><li>无状态 (少依赖)</li><li>突发性</li></ol><h2 id="serverless-的技术点有哪些？"><a href="#serverless-的技术点有哪些？" class="headerlink" title="serverless 的技术点有哪些？"></a>serverless 的技术点有哪些？</h2><ol><li>如何触发 serverless？(events)</li><li>如何解决弹性扩缩容？<ol><li>基于 kubernetes</li></ol></li><li>如何解决路由绑定？(负载均衡)</li><li>如何解决快速启动？</li><li>如何解决程序运行？(build 过程)</li><li>如何解决服务编排？</li></ol><h2 id="serverless-比较难搞定什么？"><a href="#serverless-比较难搞定什么？" class="headerlink" title="serverless 比较难搞定什么？"></a>serverless 比较难搞定什么？</h2><ol><li><p>状态保持 (本地缓存、长连接)</p></li><li><p>事务</p></li><li><p>编排</p></li><li><p>冷启动</p></li><li><p>黑盒排查问题</p></li><li><p>服务商绑定</p></li></ol><h2 id="阿里云的几款-serverless-产品的异同"><a href="#阿里云的几款-serverless-产品的异同" class="headerlink" title="阿里云的几款 serverless 产品的异同"></a>阿里云的几款 serverless 产品的异同</h2><ol><li>FC</li><li>SAE</li><li>MSE</li><li>ASK</li></ol><p>当我们纵眼观察 阿里云 提供了几类和 serverless 有关的产品时，往往容易犯迷糊。<br>FC 是函数计算，主要目的是提供计算能力，运行的资源粒度可以非常小 (128MB * 0.08 C)，可以运行任意你想要的程序。在使用场景上，类似于 <code>任务</code> 的概念。(当然你也可以把他用于 http server)</p><p>SAE 是 serverless 应用引擎，提供的能力和 FC 类似，都是计算能力。在场景上，类似于 <code>service</code> 的概念，例如启动一个 auth 服务。 相比于传统的自己部署一个服务，SAE 提供了 网关、弹性伸缩、监控 等能力。(其实，MSE 有逐渐替代 SAE 的倾向，毕竟他们的重合度太高了)</p><p>MSE 是 微服务引擎，提供的是 服务治理 的能力。是 注册/配置中心、网关、分布式事务、流量治理、开发测试 的集合体。实际就是把原来 阿里云 提供的各类单个的产品，在 微服务 的应用场景下进行了组合。</p><p>ASK 是 弹性 k8s 集群，也就是 k8s 集群的按量付费版本，提供的是 k8s 基础设施。</p><h2 id="我们对-serverless-抱有什么样的期待？"><a href="#我们对-serverless-抱有什么样的期待？" class="headerlink" title="我们对 serverless 抱有什么样的期待？"></a>我们对 serverless 抱有什么样的期待？</h2><ol><li>完全无运维<ul><li>一套完善的开发和部署平台</li></ul></li><li>友好一致的开发体验<ul><li>开发者无需关注除 业务需求 之外的一切 (比如 k8s、注册中心、服务发现、CICD 等等)</li></ul></li><li>省钱<ul><li>按需付费，不用为每个不怎么使用的应用都花着钱</li></ul></li></ol><h2 id="一些常见的-serverless-应用"><a href="#一些常见的-serverless-应用" class="headerlink" title="一些常见的 serverless 应用"></a>一些常见的 serverless 应用</h2><ul><li><input disabled type="checkbox"> 举一些具体的例子</li></ul><ol><li>音视频行业的转码需求</li><li>设计、图形等领域相关的渲染需求</li><li>推荐系统相关的机器学习需求</li></ol><p>分为 2 类：</p><ol><li>微服务场景</li><li>弹性任务场景</li></ol><h2 id="serverless-平台有哪些？"><a href="#serverless-平台有哪些？" class="headerlink" title="serverless 平台有哪些？"></a>serverless 平台有哪些？</h2><ul><li><input disabled type="checkbox"> 对比各家的产品，看看他们都在解决什么问题？</li></ul><ol><li>openfaas</li><li>knative</li><li>kubeless</li><li>阿里云相关产品</li><li>腾讯云相关产品</li><li>AWS 相关产品</li></ol><h2 id="我会怎么选？"><a href="#我会怎么选？" class="headerlink" title="我会怎么选？"></a>我会怎么选？</h2><ul><li><input disabled type="checkbox"> 列举一些场景，分别在这些场景下我会如何决策？</li></ul><p>如果我是团队 TL，我会如何选择？</p><h2 id="可以参考的文档"><a href="#可以参考的文档" class="headerlink" title="可以参考的文档"></a>可以参考的文档</h2><ol><li><a target="_blank" rel="noopener" href="https://www.aliyun.com/product/aliware/fnf">阿里云 serverless 工作流</a></li><li><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/97792.html">阿里云 serverless 应用引擎</a></li><li><a target="_blank" rel="noopener" href="https://www.aliyun.com/product/fc">阿里云 FC 函数计算</a></li><li><a target="_blank" rel="noopener" href="https://www.aliyun.com/product/cs/ask">阿里云 ASK 容器服务</a></li><li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/583/9199">腾讯云函数</a></li><li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/1154">腾讯云 serverless 应用中心</a></li><li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/1371">腾讯云 弹性微服务</a></li><li><a target="_blank" rel="noopener" href="https://firebase.google.com/">firebase</a></li></ol><hr><blockquote><p>Through meditation and by giving full attention to one thing at a time, we can learn to direct attention where we choose.<br>— <cite>Eknath Easwaran</cite></p></blockquote></div><hr><div><div class="post-metas mb-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/longblog/tags/k8s/">k8s</a> <a class="hover-with-bg" href="/longblog/tags/serverless/">serverless</a> <a class="hover-with-bg" href="/longblog/tags/faas/">faas</a> <a class="hover-with-bg" href="/longblog/tags/baas/">baas</a> <a class="hover-with-bg" href="/longblog/tags/cloud-native/">cloud native</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/longblog/posts/22_07_how_to_reslove_random_pic.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">自动解决文章的图片问题</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/longblog/posts/22_07_30_10_17_syncthing_install_log_to_resolve_file_sync.html"><span class="hidden-mobile">syncthing的方案及安装记录</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">备案: 粤ICP备2020131301号</a></span></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script><script src="/longblog/js/events.js"></script><script src="/longblog/js/plugins.js"></script><script src="/longblog/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="/longblog/js/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/longblog/static/js/showiframe.js"></script><script src="/longblog/js/boot.js"></script></body></html>