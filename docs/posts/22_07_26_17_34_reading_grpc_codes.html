<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/longblog/static/img/favicon.png"><link rel="icon" href="/longblog/static/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content=""><meta name="author" content="longalong"><meta name="keywords" content=""><title>grpc的源码走读 - Longbao</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/longblog/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/longblog/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"iamlongalong.github.io",root:"/longblog/",version:"1.8.11",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/static/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}},search_path:"/local-search.xml"}</script><script src="/longblog/js/utils.js"></script><script src="/longblog/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><header style="height:35vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/longblog/">&nbsp;<strong>Longbao</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/longblog/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/longblog/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/longblog/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/longblog/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/longblog/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(/longblog/static/img/default.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="grpc的源码走读"></span><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> longalong </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-07-26 17:34" pubdate>2022年7月26日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.8k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 21 分钟</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">grpc的源码走读</h1><div class="markdown-body"><h2 id="各包的作用"><a href="#各包的作用" class="headerlink" title="各包的作用"></a>各包的作用</h2><h3 id="admin"><a href="#admin" class="headerlink" title="admin"></a>admin</h3><ol><li>初始化了默认的 channelz 监控，详见 channelz</li><li>对外暴露了注册监控 server 的方法</li></ol><h3 id="attributes"><a href="#attributes" class="headerlink" title="attributes"></a>attributes</h3><p>提供了一个简单封装的 immutable kv store 。</p><h3 id="authz"><a href="#authz" class="headerlink" title="authz"></a>authz</h3><p>认证拦截器，提供了 rbac。<br>rbac 模型，使用的是 “github.com/envoyproxy/go-control-plane/envoy/config/rbac/v3” 这个包，这是 envoy 的模块。</p><p>提供了基于文件的拦截器。<br>可以预见，这部分内容，和 envoy 结合会比较紧密。</p><h3 id="backoff"><a href="#backoff" class="headerlink" title="backoff"></a>backoff</h3><p>提供了失败处理的默认 Config，被全局各处引用。重试延迟配置。</p><h3 id="balancer"><a href="#balancer" class="headerlink" title="balancer"></a>balancer</h3><p>使用 注册 的方式，采用 builder 的模式。<br>balancer 包含两个部分，其一 balancer ， 其二 picker。<br>balancer、picker、resolver 均会被 warpper 包裹，用来保证 grpc 内部新增能力。<br>internal 包中的 balancer ，实现了 优雅切换 的功能，是 wapper 中的重要能力。</p><p>k8s 的 resolver 部分，可以参考 <a href="#">Post not found: 技术总结/grpc的负载均衡 grpc的负载均衡</a></p><h3 id="benchmark"><a href="#benchmark" class="headerlink" title="benchmark"></a>benchmark</h3><p>提供了一系列用于做基准测试的程序。</p><h3 id="binarylog"><a href="#binarylog" class="headerlink" title="binarylog"></a>binarylog</h3><p>提供了类似于 mysql 的 binlog 机制。提供了方法过滤机制 (config中)。可以把 binlog 写到一个远端地址 (sink)。</p><p>具体实现在 internal 的 binarylog 中。</p><h3 id="channelz"><a href="#channelz" class="headerlink" title="channelz"></a>channelz</h3><p>对外提供 grpc 服务状态指标，和 metrics 的目标一样，本身也是一个 service (和自己写的 grpc service 一样)，提供了几个方法：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> ChannelzServer <span class="hljs-keyword">interface</span> &#123;<br>	<span class="hljs-comment">// Gets all root channels (i.e. channels the application has directly</span><br>	<span class="hljs-comment">// created). This does not include subchannels nor non-top level channels.</span><br>	GetTopChannels(context.Context, *GetTopChannelsRequest) (*GetTopChannelsResponse, error)<br>	<span class="hljs-comment">// Gets all servers that exist in the process.</span><br>	GetServers(context.Context, *GetServersRequest) (*GetServersResponse, error)<br>	<span class="hljs-comment">// Returns a single Server, or else a NOT_FOUND code.</span><br>	GetServer(context.Context, *GetServerRequest) (*GetServerResponse, error)<br>	<span class="hljs-comment">// Gets all server sockets that exist in the process.</span><br>	GetServerSockets(context.Context, *GetServerSocketsRequest) (*GetServerSocketsResponse, error)<br>	<span class="hljs-comment">// Returns a single Channel, or else a NOT_FOUND code.</span><br>	GetChannel(context.Context, *GetChannelRequest) (*GetChannelResponse, error)<br>	<span class="hljs-comment">// Returns a single Subchannel, or else a NOT_FOUND code.</span><br>	GetSubchannel(context.Context, *GetSubchannelRequest) (*GetSubchannelResponse, error)<br>	<span class="hljs-comment">// Returns a single Socket or else a NOT_FOUND code.</span><br>	GetSocket(context.Context, *GetSocketRequest) (*GetSocketResponse, error)<br>&#125;<br></code></pre></td></tr></table></figure><p>实际的实现在 internal 的 channelz 中。</p><p>有一个 <code>Identifier</code> 的封装，还比较有意思，可以用 数值、字符串、类型 做标识，提供了比较的方法，关键是有 <code>集成关系</code> ，可以用于标识类似于 进程关系 。</p><p>一般用于 监控 和 问题排查 和 调试环节，为了更加直观方便，官方提供了 <a target="_blank" rel="noopener" href="https://github.com/grpc/grpc-experiments/tree/master/gdebug">ui 工具</a>。关于 channelz 的设计初衷，可以查看 <a target="_blank" rel="noopener" href="https://github.com/grpc/proposal/blob/master/A14-channelz.md">proposal</a></p><h3 id="cmd"><a href="#cmd" class="headerlink" title="cmd"></a>cmd</h3><p>提供了一个简单的 生成 grpc 代码的工具 – protoc-gen-go-grpc (核心代码在 google.golang.org/protobuf/compiler/protogen 中)</p><h3 id="codes"><a href="#codes" class="headerlink" title="codes"></a>codes</h3><p>类似于 http 的 200、400、401 等等状态码，提供了 grpc 中的状态码。</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">var</span> strToCode = <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]Code&#123;<br>	<span class="hljs-string">`&quot;OK&quot;`</span>: OK,<br>	<span class="hljs-string">`&quot;CANCELLED&quot;`</span>:<span class="hljs-comment">/* [sic] */</span> Canceled,<br>	<span class="hljs-string">`&quot;UNKNOWN&quot;`</span>: Unknown,<br>	<span class="hljs-string">`&quot;INVALID_ARGUMENT&quot;`</span>: InvalidArgument,<br>	<span class="hljs-string">`&quot;DEADLINE_EXCEEDED&quot;`</span>: DeadlineExceeded,<br>	<span class="hljs-string">`&quot;NOT_FOUND&quot;`</span>: NotFound,<br>	<span class="hljs-string">`&quot;ALREADY_EXISTS&quot;`</span>: AlreadyExists,<br>	<span class="hljs-string">`&quot;PERMISSION_DENIED&quot;`</span>: PermissionDenied,<br>	<span class="hljs-string">`&quot;RESOURCE_EXHAUSTED&quot;`</span>: ResourceExhausted,<br>	<span class="hljs-string">`&quot;FAILED_PRECONDITION&quot;`</span>: FailedPrecondition,<br>	<span class="hljs-string">`&quot;ABORTED&quot;`</span>: Aborted,<br>	<span class="hljs-string">`&quot;OUT_OF_RANGE&quot;`</span>: OutOfRange,<br>	<span class="hljs-string">`&quot;UNIMPLEMENTED&quot;`</span>: Unimplemented,<br>	<span class="hljs-string">`&quot;INTERNAL&quot;`</span>: Internal,<br>	<span class="hljs-string">`&quot;UNAVAILABLE&quot;`</span>: Unavailable,<br>	<span class="hljs-string">`&quot;DATA_LOSS&quot;`</span>: DataLoss,<br>	<span class="hljs-string">`&quot;UNAUTHENTICATED&quot;`</span>: Unauthenticated,<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="connectivity"><a href="#connectivity" class="headerlink" title="connectivity"></a>connectivity</h3><p>连接状态的定义，详见 state 包。</p><h3 id="credentials"><a href="#credentials" class="headerlink" title="credentials"></a>credentials</h3><p>提供 grpc 的认证能力。<br>默认有: tls、<a target="_blank" rel="noopener" href="https://www.servicemesher.com/blog/envoy-xds-protocol/">xds</a>、<a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc8693">sts</a>、oauth、<a target="_blank" rel="noopener" href="https://cloud.google.com/docs/security/encryption-in-transit/application-layer-transport-security">alts</a>、local、insecure、google cloud 的方式。</p><h3 id="encoding"><a href="#encoding" class="headerlink" title="encoding"></a>encoding</h3><p>序列化方法 和 压缩方法。 提供了基于 proto 的序列化方法 和 基于 gzip 的压缩方法。</p><h3 id="gcp"><a href="#gcp" class="headerlink" title="gcp"></a>gcp</h3><p>希望提供 OpenCensus 的能力，目前还在测试阶段。</p><h3 id="grpclog"><a href="#grpclog" class="headerlink" title="grpclog"></a>grpclog</h3><p>logger 的使用为在一个包中，这个包初始化一个带 tag 的 logger 实例 (有缓存)。</p><p>其他方面设计中规中矩，使用的 github.com.golang/glog 作为底层 log 包</p><h3 id="health"><a href="#health" class="headerlink" title="health"></a>health</h3><p>提供客户端的健康检查接口，为了解决服务假死的情况。</p><h3 id="internal"><a href="#internal" class="headerlink" title="internal"></a>internal</h3><p>各种功能的具体实现 以及 一些工具库。</p><h3 id="interop"><a href="#interop" class="headerlink" title="interop"></a>interop</h3><p>一些用于测试的程序</p><h3 id="keepalive"><a href="#keepalive" class="headerlink" title="keepalive"></a>keepalive</h3><p>保持连接的配置。</p><h3 id="metadata"><a href="#metadata" class="headerlink" title="metadata"></a>metadata</h3><p>类似于 http 的 header，一个 <code>map[string][]string</code> ，用来传递元信息，例如 requestID 等。<br>提供注入 ctx 和 从 ctx 提取的方法。</p><h3 id="peer"><a href="#peer" class="headerlink" title="peer"></a>peer</h3><p>用来表示对端的连接信息。用来做认证的信息传输，具体信息可以查看 credentials 部分。</p><h3 id="profiling"><a href="#profiling" class="headerlink" title="profiling"></a>profiling</h3><p>性能工具，和上面的 channelz 类似，也是一个提供接口的 service，可以记录每个接口的时长等。<br>提供了 json 转义工具。<br>目前使用较少。</p><p>提供了一个 buffer.go 的文件，主要实现了一个 ring buffer，使用 atomic 实现的无锁 buffer ，值得参考 。[TODO]</p><h3 id="reflection"><a href="#reflection" class="headerlink" title="reflection"></a>reflection</h3><p>提供各 service 的反射，也是一个提供接口的 service，能够获取到每个 service 的入参与出参的格式。<br>一个最常规的用法是用于 <a target="_blank" rel="noopener" href="https://github.com/fullstorydev/grpcurl">grpcurl</a></p><h3 id="resolver"><a href="#resolver" class="headerlink" title="resolver"></a>resolver</h3><p>用于处理 <code>service name 解析</code> ，默认不做解析 (由更底层的 net 包做解析)，除非自己指定 resolver 方法。<br>关于 name 的定义详情，可以参考 <a target="_blank" rel="noopener" href="https://github.com/grpc/grpc/blob/master/doc/naming.md">grpc 官方文档</a>，URI 规范用的 <a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc3986">RFC 3986</a></p><p>从代码模式上看，使用了 建造者 模式，接口为：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">type</span> Builder <span class="hljs-keyword">interface</span> &#123;<br>	Build(xxx, xxx, opts BuildOptions) (Resolver, error)<br>	Scheme() <span class="hljs-keyword">string</span><br>&#125;<br></code></pre></td></tr></table></figure><p>resovler 从预期看，应该只需要一次调用，然后给 resolver 提供回调的能力 ( <code>ClientConn.UpdateState()</code> )。</p><p>建造者模式 相比于直接实例化，提供了 需要时再实例化 的能力。</p><h3 id="security"><a href="#security" class="headerlink" title="security"></a>security</h3><ol><li>提供了基于 rbac 的授权工具。</li><li>提供了 tls 工具，验证证书。</li></ol><p>具体可以参考 credentials</p><p>使用了 <a target="_blank" rel="noopener" href="https://github.com/google/cel-go">cel-go</a> 这个规则引擎。值得进一步看下。可以参考<a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2025423">这篇文章</a> 。规则引擎的语言定义可以查看<a target="_blank" rel="noopener" href="https://github.com/google/cel-spec/blob/master/doc/langdef.md">官方文档</a></p><h3 id="serviceconfig"><a href="#serviceconfig" class="headerlink" title="serviceconfig"></a>serviceconfig</h3><p>config 的类型接口定义。不知道用作什么目的。</p><h3 id="stats"><a href="#stats" class="headerlink" title="stats"></a>stats</h3><p>用于统计请求信息，类似于 tracing 和 metrics，在初始化 server 时，通过 options 注入。</p><h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><p>和 http 的状态码相似，不过支持自定义的 msg 信息，通过 error 传递。</p><h3 id="stress"><a href="#stress" class="headerlink" title="stress"></a>stress</h3><p>压测脚本</p><h3 id="tap"><a href="#tap" class="headerlink" title="tap"></a>tap</h3><p>xxx</p><h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><p>大量集中性单元测试</p><h3 id="xds"><a href="#xds" class="headerlink" title="xds"></a>xds</h3><p><a target="_blank" rel="noopener" href="https://www.servicemesher.com/blog/envoy-xds-protocol/">xds的介绍</a> 、 <a target="_blank" rel="noopener" href="https://www.envoyproxy.io/docs/envoy/latest/api-docs/xds_protocol">envoy 官方文档</a> 、<a target="_blank" rel="noopener" href="https://github.com/grpc/proposal/blob/master/A40-csds-support.md">grpc proposal</a><br>这是一系列资源发现服务的接口集合。<br>这个包是一套庞大的 xds 工具集，包括 client 和 server 。</p><p>因为还庞大的一套体系，没细读，之后找时间和 envoy 等一起阅读。【TODO】</p><h2 id="整体的一些感受"><a href="#整体的一些感受" class="headerlink" title="整体的一些感受"></a>整体的一些感受</h2><p>grpc 是一个很大的体系，对于 grpc 的使用也有很多的技巧，初始使用时，会觉得很简单，尤其是以后加接口做维护啥的。 但实际上，grpc 也有很多细节，甚至很多同学都不知道。<br>例如， grpc 有自己的一套 error code 方式、grpc 的 resolver 可以实现多种类型的 uri 、grpc 默认使用 pickfirst 的 lb 策略、grpc 有很多认证方式、grpc 可以用 admin 做调试、stats 做 metrics 监控 等等。</p><p>后续需要去看一下别人都是怎么使用 grpc 的，看看一些最佳实践。</p><h2 id="对于代码走读"><a href="#对于代码走读" class="headerlink" title="对于代码走读"></a>对于代码走读</h2><p>#readingcodes</p><p>代码的走读有 3 个层次：</p><ol><li>理解项目的整体模型</li><li>理解各个包解决了什么问题，大致怎么实现的</li><li>分析一些包的设计，找其亮点，想想如果自己写，会怎么写</li></ol><p>从产出的角度看，可以有：</p><ol><li>走读记录 (包的作用、设计好的地方)</li><li>代码结构图 ( 包结构、类关系、时序 )</li></ol><p>如果能把 类关系图 和 时序图 画出来，那就很不错了。</p><hr><blockquote><p>My best friend is the one who brings out the best in me.<br>— <cite>Henry Ford</cite></p></blockquote></div><hr><div><div class="post-metas mb-3"><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/longblog/tags/readingcodes/">readingcodes</a> <a class="hover-with-bg" href="/longblog/tags/grpc/">grpc</a> <a class="hover-with-bg" href="/longblog/tags/xds/">xds</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/longblog/posts/22_07_28_00_40_a_queue_storage_based_on_disk.html"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">一个基于disk的队列型存储引擎</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/longblog/posts/22_07_25_11_25_the_problem_of_grpc_lb_in_k8s_using_service.html"><span class="hidden-mobile">grpc在k8s中的负载均衡问题</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="beian"><span><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">备案: 粤ICP备2020131301号</a></span></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script><script src="/longblog/js/events.js"></script><script src="/longblog/js/plugins.js"></script><script src="/longblog/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="/longblog/js/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script src="/longblog/static/js/showiframe.js"></script><script src="/longblog/js/boot.js"></script></body></html>